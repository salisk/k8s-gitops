---
# yaml-language-server: $schema=https://kubernetes-schemas.pages.dev/v1/secret.json
apiVersion: v1
kind: Secret
metadata:
  name: coder-secret
  namespace: coder
type: Opaque
stringData:
  # Postgres Init (creates database and user)
  INIT_POSTGRES_DBNAME: coder
  INIT_POSTGRES_HOST: postgres-rw.data.svc.cluster.local
  INIT_POSTGRES_USER: coder_pg
  INIT_POSTGRES_PASS: "${CODER_POSTGRES_PASSWORD}"
  INIT_POSTGRES_SUPER_PASS: "${POSTGRES_SUPER_PASS}"

  # PostgreSQL Connection
  CODER_PG_CONNECTION_URL: "postgresql://coder:${CODER_POSTGRES_PASSWORD}@postgres-rw.data.svc.cluster.local:5432/coder?sslmode=disable"

  # OIDC Authentication (Authentik)
  CODER_OIDC_CLIENT_ID: "${CODER_OIDC_CLIENT_ID}"
  CODER_OIDC_CLIENT_SECRET: "${CODER_OIDC_CLIENT_SECRET}"
